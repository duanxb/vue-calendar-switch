!function(){if(Vue){var t=Vue.component("calendar-switch",{template:'<transition name="calendarfade">                    <div class="calendarSwitchWrap" v-show="showCalendarFlag"  @click.self="close">                    <transition name="calendarshowinBottom">                        <div class="calendarSwitchContent" v-show="showCalendarFlag">                            <div class="header">选择日期 <span class="close" @click="close">关闭</span></div>                            <table class="dateTable"><tr><td v-for="we in week">{{we}}</td></tr></table>                            <div class="content">                                <div v-for="dates in renderData">                                <div class="ymonth">{{dates.title}}</div>                                <ul class="days">                                <li v-for="day in dates.days" @click="selectDay(day, $event)" :class="{week: day.week, disabled: day.disabled, sectioned: day.sectioned, selected: day.selected}">                                    <span :data-str="_formatDateStr(dates.year,dates.month,day.value)">{{day.value}}</span>                                    <template v-if="day.selected_str"><em>{{day.selected_str}}</em></template>                                    <template v-if="day.tooltip"><div class="tooltip" :class="{show: tooltipshow}" v-text="day.tooltip"></div></template>                                </li>                                </ul>                                </div>                            </div>                    </div></transition>                    </div></transition>',data:function(){return{week:["日","一","二","三","四","五","六"],showCalendarFlag:!1,showStartDate:"",showEndDate:"",monthSize:4,minDate:"",maxDate:"",tooltipshow:!1}},computed:{renderData:function(){for(var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=[],i=1;i<=this.monthSize;i++){for(var o,n=new Date(e,a,0).getDate(),d=[],r={year:e,month:a},l=1;l<=n;l+=1)o=new Date(e,a-1,l).getDay()+1,1===l&&1!==o?(this.addRowEmptyValue(d,o),this.addRowDayValue(d,r,l,o)):(this.addRowDayValue(d,r,l,o),l===n&&7!==o&&this.addRowEmptyValue(d,7-o+1));var h=this._formatNumber(a);s.push({title:e+"年"+h+"月",year:e,month:a,days:d}),a<12?a++:(e++,a=1)}return s}},methods:{initDatePicker:function(){this.showStartDate=this.startDate,this.showEndDate=this.endDate},addRowEmptyValue:function(t,e){for(var a=1;a<e;a+=1)t.push({value:""})},addRowDayValue:function(t,e,a,s){var i={value:a},o=this._getDateObject(this.showStartDate),n=this._getDateObject(this.showEndDate),d=this.showStartDate,r=this.showEndDate,l=this._formatDateStr(e.year,e.month,a);o&&(o.year==e.year&&o.month==e.month&&o.day==a&&(i.selected=!0,i.selected_str="开始",i.tooltip="请选择结束时间"),n.year==e.year&&n.month==e.month&&n.day==a&&(i.selected=!0,i.selected_str="结束"),n&&this._compareDate(l,d)===!1&&this._compareDate(l,r)===!0&&(i.sectioned=!0)),this._compareDate(l,this.minDate)===!0&&(i.disabled=!0),this._compareDate(l,this.maxDate)===!1&&this.maxDate!==l&&(i.disabled=!0),s-=1,s%7!==0&&s%6!==0||(i.week=!0,this.weekDisabled&&(i.disabled=!0)),this.disabledDate&&this.disabledDate.length>0&&this.disabledDate.indexOf(l)>-1&&(i.disabled=!0),t.push(i)},_getDateObject:function(t){if(!t)return"";var e=t.split("-");return{year:Number(e[0]),month:Number(e[1]),day:Number(e[2])}},_dateDiff:function(t,e){var a,s,i,o;return a=this._getTimeByTimeStr(t),s=new Date(a[1]+"-"+a[2]+"-"+a[0]),a=this._getTimeByTimeStr(e),i=new Date(a[1]+"-"+a[2]+"-"+a[0]),o=parseInt(Math.abs(s-i)/1e3/60/60/24)},_formatNumber:function(t){return t<10?"0"+t:t},_formatDateStr:function(t,e,a){return t+"-"+this._formatNumber(e)+"-"+this._formatNumber(a)},_compareDate:function(t,e){var a=new Date(t.replace(/\-/g,"/")),s=new Date(e.replace(/\-/g,"/"));return!(a>=s)},selectDay:function(t,e){if(!t.disabled&&!t.selected&&t.value){var a=e.target.getAttribute("data-str");if(this.showStartDate&&this.limitSection>0){var s=this._dateDiff(this.showStartDate,a);s>this.limitSection&&this.onError("选择区间做多为"+this.limitSection+"天")}this.resetSelectDate(a)}},resetSelectDate:function(t){if(this.showStartDate)if(this.showEndDate)this.tooltipshow=!0,this.showStartDate=t,this.showEndDate="";else if(this._compareDate(t,this.showStartDate))this.tooltipshow=!0,this.showStartDate=t;else{this.showEndDate=t,this.tooltipshow=!1;var e={start_date:this.showStartDate,end_date:this.showEndDate};this.onSuccess(e);var a=this;setTimeout(function(){a.close()},500)}else this.showStartDate=t,this.tooltipshow=!0},close:function(){this.showCalendarFlag=!1,document.body.className=""}}}),e=Vue.extend(t),a=new e({el:document.createElement("div")}),s=function(t){a.element=t.element||"",a.monthSize=t.monthSize||4,a.showEffect=t.showEffect||"slideInBottom",a.limitSection=t.limitSection||0,a.weekDisabled=t.weekDisabled||!1,a.onSuccess=t.onSuccess||function(){},a.onError=t.onError||function(){},a.startDate=t.startDate||"",a.endDate=t.endDate||"",a.minDate=t.minDate,a.maxDate=t.maxDate,a.disabledDate=t.disabledDate||[],document.body.appendChild(a.$el),a.initDatePicker(),a.element.addEventListener("click",function(){a.showCalendarFlag=!0,document.body.className="overflow"},!1)};Vue.prototype.$calendarSwitch=s}}();